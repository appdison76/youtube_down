# 앱 vs 웹앱 서버 이용 비교

우리 백엔드 서버(멜로디스냅 / Railway)를 **어디서·언제** 쓰는지 정리한 표입니다.

---

## 비교표

| 기능 | 앱 (모바일) | 웹앱 |
|------|-------------|------|
| **검색** | ✅ 우리 서버 (`/api/search`) | ✅ 우리 서버 (`/api/search`) |
| **검색 자동완성** | ✅ 우리 서버 (`/api/autocomplete`) | ✅ 우리 서버 (`/api/autocomplete`) |
| **다운로드** (영상/음악) | ✅ 우리 서버 (`/api/video-info`, `/api/download`) | ✅ 우리 서버 (`/api/video-info`, `/api/download`) |
| **음악 인식** | ❌ **서버 안 탐** (ACRCloud 네이티브 SDK) | ✅ 우리 서버 (`/api/recognize`) |
| **URL로 가져오기** (영상 정보만) | ❌ **서버 안 탐** (YouTube oEmbed 직접) | ✅ 우리 서버 (`/api/video-info`) |

---

## 요약

- **앱**: 우리 서버는 **검색 + 다운로드** 때만 사용. 음악인식은 ACRCloud, URL 영상 정보는 oEmbed.
- **웹앱**: **검색, 자동완성, 다운로드, 음악인식, URL 영상 정보** 모두 우리 서버 경유.

---

## CORS — 웹앱이 경유 서버를 쓰는 이유

브라우저에서는 **CORS(Cross-Origin Resource Sharing)** 때문에 다른 도메인(예: `youtube.com`)으로 직접 요청하면 차단될 수 있습니다.

| 구분 | 브라우저 → YouTube 직접 | 브라우저 → 우리 서버 → YouTube |
|------|-------------------------|--------------------------------|
| **요청** | 브라우저가 `youtube.com`으로 요청 → CORS 정책에 따라 차단될 수 있음 | 브라우저는 **우리 서버**로만 요청 (같은 도메인 또는 서버에서 CORS 허용) |
| **응답** | YouTube가 브라우저로 응답 (허용되지 않으면 브라우저가 막음) | YouTube → **우리 서버**가 받음 (서버 간 통신이라 CORS 없음) → 우리 서버가 **웹앱**에 전달 |

정리하면:

- **요청**: 웹앱 → 우리 경유 서버 → YouTube  
- **응답**: YouTube → 우리 경유 서버 → 웹앱  

우리 서버가 **요청을 대신 보내고, 응답을 받아서 웹앱에 넘겨주기 때문에** 브라우저는 YouTube와 직접 통신하지 않아 CORS 문제가 발생하지 않습니다.

---

## 참고

- 앱 음악인식 후 “YouTube 검색”은 우리 서버 `/api/search` 사용.
- 앱/웹앱 모두 다운로드 시 **이중화**(primary → Railway) 적용.
- 버전/설정 파일 위치는 `app/VERSION_GUIDE.md`, `install-page/version.json` 참고.
