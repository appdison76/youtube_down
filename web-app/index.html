<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©œë¡œë”” ìŠ¤ëƒ… - ìŒì•…ì†Œë¦¬ë¡œ</title>
    <script>
        // ì‚¼ì„±ì¸í„°ë„·(HTTPSì—ì„œ fixedê°€ ê¹¨ì§ˆ ìˆ˜ ìˆìŒ) â†’ htmlì— í´ë˜ìŠ¤ ë¶™ì—¬ CSSì—ì„œ stickyë¡œ ëŒ€ì²´
        (function(){
            var ua = navigator.userAgent || '';
            if (/SamsungBrowser|Samsung/i.test(ua)) {
                document.documentElement.classList.add('ua-samsung-internet');
            }
        })();
    </script>
    <meta name="description" content="ìŒì•…ì„ ì°¾ê³ , YouTubeì—ì„œ ê²€ìƒ‰í•˜ê³ , ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”.">
    <script>
        // ìºì‹œ ë¬´íš¨í™”: CSS/JS ìˆ˜ì • í›„ ì´ ìˆ«ìë§Œ ì˜¬ë¦¬ë©´ ìƒˆë¡œ ë¶ˆëŸ¬ì˜´ (í•œ ê³³ë§Œ ìˆ˜ì •í•˜ë©´ ë¨)
        window.CACHE_V = 9;
    </script>
    <link rel="manifest" href="manifest.json" id="link-manifest">
    <link rel="stylesheet" href="css/styles.css" id="link-css">
    <script>
        (function(){ var v = window.CACHE_V; var t = Date.now(); document.getElementById('link-manifest').href = 'manifest.json?v=' + v + '&_=' + t; document.getElementById('link-css').href = 'css/styles.css?v=' + v + '&_=' + t; })();
    </script>
    <script>
        // config ë¡œë“œ ì‹¤íŒ¨ ì‹œ fallback (api.js ê¸°ë³¸ê°’ê³¼ ë™ì¼: primary ë¨¼ì €)
        window.API_BASE_URL = 'https://melodysnap.mediacommercelab.com';
    </script>
</head>
<body>
    <div class="top-bar">
        <!-- PRO ì„¤ì¹˜ ë°°ë„ˆ (íƒ€ì´í‹€ ìœ„) -->
        <a href="install-page/" id="pro-install-banner" class="pro-install-banner" target="_blank" rel="noopener">
            <span class="pro-install-text">PRO ë²„ì „ ë¬´ë£Œì„¤ì¹˜</span>
            <ion-icon name="arrow-forward-circle-outline" class="pro-install-icon" aria-hidden="true"></ion-icon>
        </a>
        <!-- í—¤ë” -->
        <header class="app-header">
        <div class="header-content">
            <button type="button" id="header-home-btn" class="header-left" title="ì†Œë¦¬ë¡œ ì´ë™" aria-label="ì†Œë¦¬ë¡œ ì´ë™">
                <div class="logo-container">
                    <img id="app-logo" src="logo.png" alt="Melody Snap" onerror="this.style.display='none'" />
                </div>
                <div class="header-title-container">
                    <div class="header-title">Melody Snap</div>
                </div>
            </button>
            <nav class="nav-tabs">
                <button class="nav-tab active" data-page="recognition">
                    <span class="nav-icon">ğŸµ</span>
                    <span class="nav-text">ìŒì•…ì†Œë¦¬ë¡œ</span>
                </button>
                <button class="nav-tab" data-page="search">
                    <span class="nav-icon">ğŸ”</span>
                    <span class="nav-text">ê²€ìƒ‰ìœ¼ë¡œ</span>
                </button>
                <button class="nav-tab" data-page="save">
                    <span class="nav-icon">ğŸ“¥</span>
                    <span class="nav-text">ë§í¬ë³µì‚¬</span>
                </button>
                <button class="nav-tab" data-page="library">
                    <span class="nav-icon">â­</span>
                    <span class="nav-text">ì°œí•˜ê¸°</span>
                </button>
            </nav>
        </div>
    </header>
    </div>
    <script>document.getElementById('app-logo').src = 'logo.png?v=' + window.CACHE_V;</script>

    <!-- ë©”ì¸ ì»¨í…ì¸  -->
    <main class="container">
        <!-- ì†Œë¦¬ë¡œ ì°¾ê¸° í™”ë©´ -->
        <div id="recognition-page" class="page active">
            <div class="recognition-area">
                <button id="recognition-btn" class="recognition-button">
                    <ion-icon name="mic" id="mic-icon" class="recognition-icon"></ion-icon>
                    <ion-icon name="stop" id="stop-icon" class="recognition-icon" style="display: none;"></ion-icon>
                </button>
                <p class="recognition-text" id="recognition-status">ìŒì•…ì†Œë¦¬ë¡œ ì°¾ê¸°ë¥¼ ì‹œì‘í•˜ì„¸ìš”</p>
                <div class="recognition-usage">
                    <h4 class="recognition-usage-title">ğŸ’¡ ì‚¬ìš©ë²•</h4>
                    <ul class="recognition-usage-list">
                        <li>ë²„íŠ¼ì„ ëˆ„ë¥¸ ë’¤ <strong>ì¬ìƒ ì¤‘ì¸ ìŒì•…</strong>ì— ë§ˆì´í¬ë¥¼ ê°€ê¹Œì´ í•˜ì„¸ìš”.</li>
                        <li>ì•½ <strong>10ì´ˆ</strong>ê°„ ë“£ê³  ìë™ìœ¼ë¡œ ì¸ì‹í•©ë‹ˆë‹¤.</li>
                        <li>ì¸ì‹ì´ ëë‚˜ë©´ ê³¡ ì •ë³´ì™€ YouTube ê²€ìƒ‰ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.</li>
                        <li>ì²˜ìŒ ì‚¬ìš© ì‹œ <strong>ë§ˆì´í¬ ê¶Œí•œ</strong> í—ˆìš©ì´ í•„ìš”í•©ë‹ˆë‹¤.</li>
                    </ul>
                </div>
                <div id="recognition-result" class="recognition-result" style="display: none;">
                    <h3 class="section-title">ì¸ì‹ëœ ê³¡</h3>
                    <div class="result-card recognition-result-card">
                        <img id="result-thumbnail" src="" alt="ì¸ë„¤ì¼" class="result-thumbnail" />
                        <div class="result-info">
                            <h4 id="result-title" class="selectable"></h4>
                            <p id="result-artist" class="selectable"></p>
                            <p id="result-album" class="result-album selectable" style="display: none;"></p>
                        </div>
                    </div>
                    <div id="recognition-youtube-area" class="youtube-results-area" style="display: none;">
                        <h3 class="section-title">ë‹¤ìš´ë¡œë“œí•  ì˜ìƒ ì„ íƒ</h3>
                        <div id="recognition-youtube-results" class="youtube-results-list"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ê²€ìƒ‰ í™”ë©´ -->
        <div id="search-page" class="page" style="display: none;">
            <div class="search-area">
                <h3 class="section-title">YouTube ê²€ìƒ‰ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ</h3>
                <div class="search-row">
                    <div class="search-input-wrap">
                        <input type="text" id="search-input" class="search-input" placeholder="YouTube ê²€ìƒ‰..." autocomplete="off" />
                        <button type="button" id="search-clear-btn" class="search-clear-btn" title="ê²€ìƒ‰ì–´ ì§€ìš°ê¸°" aria-label="ê²€ìƒ‰ì–´ ì§€ìš°ê¸°" style="display: none;">
                            <ion-icon name="close-circle"></ion-icon>
                        </button>
                        <div id="search-suggestions" class="search-suggestions" style="display: none;" role="listbox" aria-label="ê²€ìƒ‰ ì¶”ì²œ"></div>
                    </div>
                    <button id="search-btn" class="search-button">ê²€ìƒ‰</button>
                </div>
                <label class="search-autocomplete-toggle">
                    <input type="checkbox" id="search-autocomplete-toggle" checked />
                    <span>ìë™ì™„ì„±(ìµœê·¼Â·ì¶”ì²œ)</span>
                </label>
                <div id="search-results" class="search-results youtube-results-list"></div>
            </div>
        </div>

        <!-- ë‹¤ìš´ë¡œë“œ í™”ë©´ -->
        <div id="save-page" class="page" style="display: none;">
            <div class="save-area">
                <h3 class="section-title">ë§í¬ë¡œ ë‹¤ìš´ë¡œë“œ</h3>
                <div class="url-input-wrap">
                    <input type="text" id="url-input" class="url-input" placeholder="ìœ íŠœë¸Œ ì˜ìƒì£¼ì†Œ ë¶™ì—¬ë„£ê¸°" autocomplete="off" />
                    <button type="button" id="url-clear-btn" class="search-clear-btn" title="ì…ë ¥ ì§€ìš°ê¸°" aria-label="ì…ë ¥ ì§€ìš°ê¸°" style="display: none;">
                        <ion-icon name="close-circle"></ion-icon>
                    </button>
                </div>
                <button id="url-submit-btn" class="url-submit-button">ê°€ì ¸ì˜¤ê¸°</button>
                <div id="video-info" class="video-info youtube-results-list" style="display: none;"></div>
            </div>
        </div>

        <!-- ì°œí•˜ê¸° í™”ë©´ -->
        <div id="library-page" class="page" style="display: none;">
            <div class="library-area">
                <h3 class="section-title">ì°œí•˜ê¸°</h3>
                <div class="library-search-wrap">
                    <input type="text" id="library-search" class="library-search" placeholder="ê²€ìƒ‰..." autocomplete="off" />
                    <button type="button" id="library-clear-btn" class="search-clear-btn" title="ê²€ìƒ‰ì–´ ì§€ìš°ê¸°" aria-label="ê²€ìƒ‰ì–´ ì§€ìš°ê¸°" style="display: none;">
                        <ion-icon name="close-circle"></ion-icon>
                    </button>
                </div>
                <div id="library-items" class="library-items"></div>
            </div>
        </div>
    </main>

    <!-- ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤: main ë°–ì— ë‘ì–´ ë°°í¬ í™˜ê²½ì—ì„œë„ fixedê°€ ë·°í¬íŠ¸ ê¸°ì¤€ìœ¼ë¡œ ë™ì‘ (ìƒìœ„ transform ì˜í–¥ ì—†ìŒ) -->
    <div class="ads-section">
        <p class="ads-disclaimer">ì´ í¬ìŠ¤íŒ…ì€ ì¿ íŒ¡ íŒŒíŠ¸ë„ˆìŠ¤ í™œë™ì˜ ì¼í™˜ìœ¼ë¡œ, ì´ì— ë”°ë¥¸ ì¼ì •ì•¡ì˜ ìˆ˜ìˆ˜ë£Œë¥¼ ì œê³µë°›ìŠµë‹ˆë‹¤.</p>
        <div id="coupang-banner">
            <script src="https://ads-partners.coupang.com/g.js"></script>
            <script>
                (function(){
                    var w = window.innerWidth;
                    var id = w >= 769 ? 955663 : 956091;
                    var ww = w >= 769 ? "680" : "320";
                    if (typeof PartnersCoupang !== "undefined") {
                        new PartnersCoupang.G({"id":id,"template":"carousel","trackingCode":"AF3962095","width":ww,"height":"100","tsource":""});
                    }
                })();
            </script>
        </div>
    </div>

    <!-- ì‚¼ì„±ì¸í„°ë„· ë“± HTTPSì—ì„œ ë˜í¼ê°€ ìƒê¸°ë©´ fixedê°€ ê¹¨ì§ˆ ìˆ˜ ìˆì–´, ê´‘ê³ ë¥¼ body ì§ê³„ ìì‹ìœ¼ë¡œ ì˜®ê¹€ -->
    <script>
        (function(){
            var el = document.querySelector('.ads-section');
            if (el && el.parentNode && el.parentNode !== document.body) {
                document.body.appendChild(el);
            }
        })();
    </script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script>
        (function(){ var v = window.CACHE_V; var t = Date.now();
            document.write('<script src="js/indexeddb.js?v='+v+'&_='+t+'"><\/script><script src="js/api.js?v='+v+'&_='+t+'"><\/script><script src="js/recognition.js?v='+v+'&_='+t+'"><\/script><script src="js/search.js?v='+v+'&_='+t+'"><\/script><script src="js/save.js?v='+v+'&_='+t+'"><\/script><script src="js/library.js?v='+v+'&_='+t+'"><\/script><script src="js/app.js?v='+v+'&_='+t+'"><\/script>');
        })();
    </script>
    <script>
        // ë¸Œë¼ìš°ì € ì„¤ì • ì•ˆë‚´ (ì§ì ‘ ì—´ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ ëª…í™•í•œ ì•ˆë‚´ ì œê³µ)
        function openBrowserSettings() {
            const userAgent = navigator.userAgent.toLowerCase();
            let message = '';
            
            if (userAgent.includes('android')) {
                // Android ë¸Œë¼ìš°ì € (ìµœì‹  ë²„ì „ ëŒ€ì‘)
                message = 'ğŸ“± Android ë¸Œë¼ìš°ì € ë§ˆì´í¬ ê¶Œí•œ ì„¤ì •:\n\n' +
                         'ë°©ë²• 1 (ê°€ì¥ ì‰¬ì›€):\n' +
                         'â†’ ë¸Œë¼ìš°ì € ë©”ë‰´(â‹®) í´ë¦­ (í™”ë©´ ì˜¤ë¥¸ìª½ ìƒë‹¨)\n' +
                         'â†’ "ì‚¬ì´íŠ¸ ì„¤ì •" ë˜ëŠ” "ê¶Œí•œ" ì°¾ê¸°\n' +
                         'â†’ "ë§ˆì´í¬" â†’ "í—ˆìš©"ìœ¼ë¡œ ë³€ê²½\n\n' +
                         'ë°©ë²• 2:\n' +
                         'â†’ ë¸Œë¼ìš°ì € ë©”ë‰´(â‹®) â†’ ì„¤ì •\n' +
                         'â†’ "ì‚¬ì´íŠ¸ ì„¤ì •" â†’ "ë§ˆì´í¬"\n' +
                         'â†’ ì´ ì‚¬ì´íŠ¸ë¥¼ ì°¾ì•„ "í—ˆìš©"ìœ¼ë¡œ ë³€ê²½\n\n' +
                         'ë°©ë²• 3:\n' +
                         'â†’ ì£¼ì†Œì°½ì˜ ì•„ì´ì½˜ì´ ë³´ì´ë©´ í´ë¦­\n' +
                         'â†’ "ì‚¬ì´íŠ¸ ì„¤ì •" â†’ "ë§ˆì´í¬" â†’ "í—ˆìš©"\n\n' +
                         'ğŸ’¡ ë¸Œë¼ìš°ì € ë²„ì „ì— ë”°ë¼ ë©”ë‰´ ìœ„ì¹˜ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
            } else if (userAgent.includes('iphone') || userAgent.includes('ipad')) {
                // iOS Safari
                message = 'ğŸ“± iOS Safari ë§ˆì´í¬ ê¶Œí•œ ì„¤ì •:\n\n' +
                         'ë°©ë²• 1 (ê°€ì¥ ì‰¬ì›€):\n' +
                         'â†’ ì£¼ì†Œì°½ ì™¼ìª½ì˜ "aA" ì•„ì´ì½˜ í´ë¦­\n' +
                         'â†’ "ì‚¬ì´íŠ¸ ì„¤ì •" ë˜ëŠ” "ì›¹ì‚¬ì´íŠ¸ ì„¤ì •"\n' +
                         'â†’ "ë§ˆì´í¬" â†’ "í—ˆìš©"ìœ¼ë¡œ ë³€ê²½\n\n' +
                         'ë°©ë²• 2:\n' +
                         'â†’ ì„¤ì • ì•± â†’ Safari\n' +
                         'â†’ "ì¹´ë©”ë¼" ë˜ëŠ” "ë§ˆì´í¬" í—ˆìš© í™•ì¸\n\n' +
                         'ë°©ë²• 3:\n' +
                         'â†’ Safariì—ì„œ ì£¼ì†Œì°½ì˜ ìë¬¼ì‡  ì•„ì´ì½˜ í´ë¦­\n' +
                         'â†’ "ì›¹ì‚¬ì´íŠ¸ ì„¤ì •" â†’ "ë§ˆì´í¬" í—ˆìš©';
            } else {
                // Desktop (ìµœì‹  ë¸Œë¼ìš°ì € ëŒ€ì‘)
                message = 'ğŸ’» ë°ìŠ¤í¬í†± ë¸Œë¼ìš°ì € ë§ˆì´í¬ ê¶Œí•œ ì„¤ì •:\n\n' +
                         'ë°©ë²• 1 (ê°€ì¥ ì‰¬ì›€):\n' +
                         'â†’ ë¸Œë¼ìš°ì € ë©”ë‰´(â‹®) í´ë¦­ (í™”ë©´ ì˜¤ë¥¸ìª½ ìƒë‹¨)\n' +
                         'â†’ "ì„¤ì •" â†’ "ê°œì¸ì •ë³´ ë° ë³´ì•ˆ" â†’ "ì‚¬ì´íŠ¸ ì„¤ì •"\n' +
                         'â†’ "ë§ˆì´í¬" â†’ ì´ ì‚¬ì´íŠ¸ë¥¼ í—ˆìš© ëª©ë¡ì— ì¶”ê°€\n\n' +
                         'ë°©ë²• 2:\n' +
                         'â†’ ì£¼ì†Œì°½ì˜ ì•„ì´ì½˜ì´ ë³´ì´ë©´ í´ë¦­\n' +
                         'â†’ "ì‚¬ì´íŠ¸ ì„¤ì •" ë˜ëŠ” "ê¶Œí•œ" â†’ "ë§ˆì´í¬" â†’ "í—ˆìš©"\n\n' +
                         'ë°©ë²• 3 (Chrome/Edge):\n' +
                         'â†’ ì£¼ì†Œì°½ì— ì…ë ¥: chrome://settings/content/microphone\n' +
                         'â†’ ì´ ì‚¬ì´íŠ¸ë¥¼ í—ˆìš© ëª©ë¡ì— ì¶”ê°€\n\n' +
                         'ë°©ë²• 4 (Firefox):\n' +
                         'â†’ ë¸Œë¼ìš°ì € ë©”ë‰´(â˜°) â†’ ì„¤ì •\n' +
                         'â†’ "ê°œì¸ ì •ë³´ ë° ë³´ì•ˆ" â†’ "ê¶Œí•œ" â†’ "ë§ˆì´í¬"\n\n' +
                         'ğŸ’¡ ë¸Œë¼ìš°ì € ë²„ì „ì— ë”°ë¼ ë©”ë‰´ êµ¬ì¡°ê°€ ë‹¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
            }
            
            // ëª¨ë‹¬ ìŠ¤íƒ€ì¼ì˜ ì•ˆë‚´ í‘œì‹œ
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.7);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10000;
                padding: 20px;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white;
                padding: 24px;
                border-radius: 12px;
                max-width: 400px;
                width: 100%;
                max-height: 80vh;
                overflow-y: auto;
                box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            `;
            
            const text = document.createElement('div');
            text.style.cssText = `
                white-space: pre-line;
                line-height: 1.6;
                color: #333;
                font-size: 14px;
                margin-bottom: 16px;
            `;
            text.textContent = message;
            
            const closeBtn = document.createElement('button');
            closeBtn.textContent = 'ë‹«ê¸°';
            closeBtn.style.cssText = `
                width: 100%;
                padding: 12px;
                background: #FF0000;
                color: white;
                border: none;
                border-radius: 8px;
                font-size: 16px;
                cursor: pointer;
                font-weight: bold;
            `;
            closeBtn.onclick = () => {
                document.body.removeChild(modal);
            };
            
            content.appendChild(text);
            content.appendChild(closeBtn);
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
            modal.onclick = (e) => {
                if (e.target === modal) {
                    document.body.removeChild(modal);
                }
            };
        }
    </script>
</body>
</html>
